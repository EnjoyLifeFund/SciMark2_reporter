#!/bin/bash
## Dependency brew install gnu_time
## 

make clean
function move2folder() {
	mkdir $folder
	yes|mv FFT.o $folder
	yes|mv LU.o $folder
	yes|mv MonteCarlo.o $folder
	yes|mv Random.o $folder
	yes|mv SOR.o $folder
	yes|mv SparseCompRow.o $folder
	yes|mv Stopwatch.o $folder
	yes|mv array.o $folder
	yes|mv kernel.o $folder
	yes|mv scimark2 $folder
	yes|mv scimark2.o $folder
}

function getscore() {
	echo "[Info] Smaller Number ~1024"
	gtime ./$folder/scimark2 > scimark2.$suffix
	cat scimark2.$suffix
	echo "[Info] Larger Number ~1048576"
	gtime ./$folder/scimark2 -large > scimark2-large.$suffix
	cat scimark2-large.$suffix
	yes|mv scimark2*.$suffix $folder
}

## Using mac for scoring
echo "[Info] Building -- Scimark2 Benchmarking using system compiler..."
make
folder=newbin
suffix=score
move2folder
echo "[Info] Testing -- Scimark2 Benchmarking using system compiler..."
getscore

## Using GCC for scoring
echo "[Info] Building -- Scimark2 Benchmarking using GCC-7 compiler..."
./gccmake2 
folder=gccbin
suffix=gccscore
move2folder
echo "[Info] Testing -- Scimark2 Benchmarking using GCC-7 compiler..."
getscore

